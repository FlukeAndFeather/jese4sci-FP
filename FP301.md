# FP301: Document your code

**Documentation** is an essential component of writing code that your colleagues, you, and especially your future self can use and understand. You're probably (hopefully!) used to documenting your code in at least one way - by leaving comments in your scripts or by embedding code in R markdown files or jupyter notebooks. This is a great place to start - it's a whole lot better than no documentation at all - but what about if someone else uses your code? Will these comments be as clear to them  (or your future self) as they are to you now?

In this exercise, you'll learn to document your code so that it's easier for people (again, including yourself!) to find, read, and understand.

## Document your functions (with `Roxygen2`)

### The Problem: Comments aren't good enough

Let's say that you've written a function to apply a logit transformation. You might, for example, be used to documenting that function like this:

```R
## Function to apply a logit transformation to proportion data
## Function also shrinks data from intervals [0,1] to [0 + beta, 1 - beta]
logit <- function(p, beta = 0) {
  min = 0 + beta
  max = 1 - beta
  p = p * (max - min) + min
  log(p/(1 - p))
}
```

This is a pretty simple function and it's likely that the comments you've left here will be clear enough to most users familiar with R. But let's say you've sourced a couple R scripts, one of which contains this function, and you're using this function to fit a linear model on the log-odds scale:

```R
data <- read.csv("data.csv")
source("my_functions.R")
source("my_other_functions.R")

lm(logit(y) ~ x, data = data)
```

Where did `logit` come from? How does someone using this script know how to find and read the comments you've left about this function? Wouldn't it be nice if they could just type

```R
?logit
```

into their console and learn all they need to know about this function?

### The solution: `Roxygen2`

With just the tiniest bit of extra work using the `Roxygen2` package, we can write documentation for our functions that is as easy to find and understand as documentation from CRAN packages.

The first step is to leave Roxygen-style comments. These are distinguished from regular R comments (`#`) by the addition of an apostrophe: `#'`. We can outline the arguments our function takes using `#' @param`, describe it's output using `#' @return`, etc ([see here](https://cran.r-project.org/web/packages/roxygen2/vignettes/rd.html) for a guide to the available documentation tags).

Using Roxygen-style comments, it's hardly any work at all to produce much better documentation for our `logit` function:

```R
#' Apply a logit transformation to proportion data
#'
#' @param p A vector of proportion values (i.e., values betwen 0 and 1)
#' @param beta If beta > 0, shrinks data from interval [0,1] to [0 + beta, 1 - beta]
#' @return A numeric vector of logit-transformed proportion values
logit <- function(p, beta = 0) {
  min = 0 + beta
  max = 1 - beta
  p = p * (max - min) + min
  log(p/(1 - p))
}
```

The beauty of this is that, even in this form, it's easier to understand and more explicit than the comments we previously left - we now know exactly what to pass for each of the arguments, for example. But the real utility of these comments comes when we run `Roxygen2:roxygenise()` or `devtools::document()`, which converts these comments into `.Rd` files - which R then displays to us in a human readable format. Now, we can type `?logit` into the console, and we get:

![logit_documentation](image\logit_documentation.JPG)

As you're pulling together the research compendium for your final project, make sure to document any functions you write with Roxygen-style comments! 

## Create a README

A README is a document that you place in your project directory which orients users to your project helps them get your code up and running. It should include:

- A description of the project, including a link to any published research that it may accompany, a list of authors or contributors, and a way for people to cite the research and/or your repository.
- A description of the project directory - what do each of the folders in the project contain? You can also introduce the user to important analysis or data files in those folders.
- If not obvious, there should be instructions on how (and in what order) to run the various scripts in the project directory.
- License information

READMEs are usually .txt or .md ("markdown") files. It's best to use .md files if you're using github, because they're readable as plain text by users that don't have a markdown editor, and github will render them nicely on your repo's page so long as your README.md file is placed in the top level of your project directory.

Luckily, `rrtools` includes a template README.Rmd file that you can use to generate your README.md (yes, you're generating a plain markdown file from an R markdown file, it's confusing, we know). Edit this .Rmd file with the information relevant to you and your final project, and knit the file to generate your README! 

**Note:** While you always have the option to write your own .md file from scratch, do NOT directly edit the README.md file generated by your README.Rmd file - you'll just overwrite the changes the next time you knit the .Rmd version!

## Assignment

For this part of the final project, we're looking to see that you've incorporated **both a README and Roxygen-style comments** into your research compendium, and that you've translated your Roxygen-style comments into .Rd documentation.

Your assignment is to **submit an issue** with a link to your final project repository, with a README and properly documented functions. We should be able to clearly see both, because Roxygen2 will place your documentation in the `man` folder in your project directory, and the README will be clearly rendered on your repo's github page.